package hgtest.storage.bje.DefaultBiIndexImpl;


import org.hypergraphdb.storage.bje.DefaultBiIndexImpl;
import org.powermock.api.easymock.PowerMock;
import org.junit.Test;

import static org.easymock.EasyMock.replay;
import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;

/**
 * @author Yuriy Sechko
 */
public class DefaultBiIndexImpl_isOpenTest extends DefaultBiIndexImplTestBasis
{
	@Test
	public void indexIsNotOpenedYet() throws Exception
	{
        replay(mockedStorage);

		final DefaultBiIndexImpl indexImpl = new DefaultBiIndexImpl(INDEX_NAME,
                mockedStorage, transactionManager, keyConverter, valueConverter,
				comparator, null);

        assertFalse(indexImpl.isOpen());
	}

    @Test
    public void indexIsOpen() throws Exception {
        mockStorage();
        replay(mockedStorage);

        final DefaultBiIndexImpl indexImpl = new DefaultBiIndexImpl(INDEX_NAME,
                mockedStorage, transactionManager, keyConverter, valueConverter,
                comparator, null);
        indexImpl.open();

        assertTrue(indexImpl.isOpen());
        closeDatabases(indexImpl);
    }
}
